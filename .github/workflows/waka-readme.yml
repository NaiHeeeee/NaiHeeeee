name: Update Waka

on:
  # for manual workflow trigger
  workflow_dispatch:
  # schedule:
  #   # runs at 12 AM UTC every day
  #   - cron: "0 0 * * *"
  workflow_run:
    workflows: ["Update Anime List"]
    types:
      - completed

jobs:
  update-readme:
    name: WakaReadme DevMetrics
    if: ${{ github.actor != 'NaiHeBot' }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.NAIHEBOT_GITHUB_TOKEN }}

      - uses: anmol098/waka-readme-stats@master
        with:
          WAKATIME_API_KEY: ${{ secrets.WAKATIME_TOKEN }}
          GH_TOKEN: ${{ secrets.NAIHEBOT_GITHUB_TOKEN }}
          COMMIT_MESSAGE: ":memo: Update Profile (waka)"
          COMMIT_BY_ME: "false"
          COMMIT_USERNAME: NaiHeBot
          COMMIT_EMAIL: naiheeee6@gmail.com
          # 段落末尾显示更新日期
          SHOW_UPDATED_DATE: "true"
          # 迄今为止编写的代码行数
          SHOW_LINES_OF_CODE: "false"
          # 不同年份不同季度编写的代码行数
          SHOW_LOC_CHART: "false"
          # 不同语言和框架的存储库数量
          SHOW_LANGUAGE_PER_REPO: "false"
          # 参与的项目
          SHOW_PROJECTS: "false"
          # 用户的简短趣闻信息
          SHOW_SHORT_INFO: "false"
          # 人资料浏览量
          SHOW_PROFILE_VIEWS: "false"
          # 代码时间
          SHOW_TOTAL_CODE_TIME: "false"